{% extends '@LinkORBNebula/module/base.html.twig' %}

{% block title %}Wikis{% endblock %}

{% block context_content %}

  <div class="buttonbox" style="float: right; padding: 0; margin: 0;">
    <a href="{{ path('wiki_search') }}" class="c-btn c-btn--secondary">
      <i class="icon-lux-search-fill"></i> Search
    </a>
    {% if is_granted('create', 'wikis') %}
      <a href="{{ path('wiki_add') }}" class="c-btn c-btn--outline-primary">
        <i class="icon-lux-add-fill"></i>
        New wiki
      </a>
    {% endif %}
  </div>
  <h1>Wikis</h1>
  <div style="clear: both"></div>

  <fieldset>
    <table class="table">
      <thead>
      <tr>
        <th>Name</th>
      </tr>
      </thead>
      <tbody>
      {% for wiki in wikis %}
        <tr>
          <td>
            <a href="{{ path('wiki_view', {'wikiName': wiki.name}) }}">
              <h2 class="d-inline u-fs-3">{{ wiki.name }}</h2>
              <small class="text">{{ wiki.wikiPages|length }} pages</small>
              <br/>
            </a>
            {{ wiki.description }}

            {% if wiki.hasAccessControlExpression %}
              <br><br>
              Restricted to <code>{{ wiki.getAccessControlExpression }}</code>
            {% endif %}
          </td>

        </tr>
      {% else %}
        <tr>
          <td colspan="1">no records found</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </fieldset>

{% endblock %}
