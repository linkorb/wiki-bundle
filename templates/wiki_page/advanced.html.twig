{% extends '@LinkORBWiki/base.wiki.html.twig' %}

{% block body %}
  <h1>Advanced </h1>
  <div style="clear: both;"></div>

  {{ form_start(form) }}
  <fieldset>
    <div style="text-align: right" class="p-2">
      {% if wikiPage.id %}
        <a href="{{ path('wiki_page_edit', {'wikiName':  wikiPage.wiki.name,'pageName': wikiPage.name }) }}"
           class="btn btn-primary">
          <i class="fa fa-edit" aria-hidden="true"></i> Content
        </a>
        <button class="btn btn-success">{{ button_label|default('Save') }}</button>
      {% else %}
        <button class="btn btn-success">{{ button_label|default('Create page') }}</button>
      {% endif %}
    </div>
    {{ form_widget(form) }}
  </fieldset>
  {{ form_end(form) }}

  {% if wikiPage.id %}
    <div>
      <form action="{{ path('wiki_page_delete', {'wikiName':  wikiPage.wiki.name, 'pageName': wikiPage.name }) }}"
            method="post"
            onsubmit="return confirm('Are you sure you want to delete this page?')">
        <input type="hidden" name="token" value="{{ csrf_token('delete-item') }}">
        <button type="submit" class="btn btn-danger">
          <i class="icon-lux-trash"></i>
          Delete
        </button>
      </form>
    </div>
  {% endif %}
{% endblock %}


{% block scripts_custom %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/editor/0.1.0/editor.css">
  <script src="https://cdn.jsdelivr.net/editor/0.1.0/editor.js"></script>
  <script src="https://cdn.jsdelivr.net/editor/0.1.0/marked.js"></script>
  <style>
    .CodeMirror {
      border: 1px solid #ece9e9;
      min-height: 400px !important;
    }
  </style>
  <script type="text/javascript">
    if (document.getElementById('wiki_page_content')) {

      document.addEventListener('DOMContentLoaded', function () {
        var editor = new Editor({
          element: document.getElementById('wiki_page_content'),
        })
        editor.render();
      });
    }
  </script>
{% endblock %}
